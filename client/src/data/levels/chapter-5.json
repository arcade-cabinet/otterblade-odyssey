{
  "$schema": "./level-schema.json",
  "id": 5,
  "chapterId": 5,
  "name": "Deep Cellars",
  "description": "Descend into the underground passages to cut off the Galeborn infiltration.",
  "bounds": {
    "width": 2800,
    "height": 1000
  },
  "spawn": {
    "x": 100,
    "y": 800
  },
  "exit": {
    "x": 2700,
    "y": 150,
    "width": 100,
      "height": 200,
    "targetChapter": 6
  },
  "platforms": [
    {
      "id": "entrance_stairs",
      "x": 0,
      "y": 700,
      "width": 300,
      "height": 100,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "descent_1",
      "x": 250,
      "y": 600,
      "width": 200,
      "height": 30,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "descent_2",
      "x": 150,
      "y": 500,
      "width": 200,
      "height": 30,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "cellar_floor_1",
      "x": 0,
      "y": 0,
      "width": 800,
      "height": 400,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "wine_barrel_stack",
      "x": 400,
      "y": 430,
      "width": 150,
      "height": 80,
      "type": "solid",
      "material": "wood"
    },
    {
      "id": "crumbling_ledge_1",
      "x": 600,
      "y": 520,
      "width": 120,
      "height": 25,
      "type": "crumbling",
      "material": "stone",
      "crumbleDelay": 500
    },
    {
      "id": "root_bridge",
      "x": 750,
      "y": 450,
      "width": 200,
      "height": 20,
      "type": "passthrough",
      "material": "wood"
    },
    {
      "id": "tunnel_floor",
      "x": 800,
      "y": 0,
      "width": 600,
      "height": 350,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "crumbling_ledge_2",
      "x": 1000,
      "y": 420,
      "width": 120,
      "height": 25,
      "type": "crumbling",
      "material": "stone",
      "crumbleDelay": 500
    },
    {
      "id": "crumbling_ledge_3",
      "x": 1150,
      "y": 480,
      "width": 120,
      "height": 25,
      "type": "crumbling",
      "material": "stone",
      "crumbleDelay": 500
    },
    {
      "id": "underground_pool_edge",
      "x": 1300,
      "y": 0,
      "width": 400,
      "height": 300,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "stepping_stone_pool_1",
      "x": 1500,
      "y": 330,
      "width": 80,
      "height": 30,
      "type": "solid",
      "material": "moss"
    },
    {
      "id": "stepping_stone_pool_2",
      "x": 1620,
      "y": 360,
      "width": 80,
      "height": 30,
      "type": "solid",
      "material": "moss"
    },
    {
      "id": "catacomb_floor",
      "x": 1700,
      "y": 0,
      "width": 600,
      "height": 280,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "catacomb_ledge_1",
      "x": 1800,
      "y": 380,
      "width": 150,
      "height": 25,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "catacomb_ledge_2",
      "x": 2000,
      "y": 450,
      "width": 150,
      "height": 25,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "catacomb_ledge_3",
      "x": 2200,
      "y": 380,
      "width": 150,
      "height": 25,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "exit_chamber",
      "x": 2300,
      "y": 0,
      "width": 500,
      "height": 300,
      "type": "solid",
      "material": "stone"
    },
    {
      "id": "exit_stairs",
      "x": 2500,
      "y": 300,
      "width": 200,
      "height": 30,
      "type": "solid",
      "material": "stone"
    }
  ],
  "checkpoints": [
    {
      "id": "entrance_torch",
      "x": 150,
      "y": 830,
      "isStart": true
    },
    {
      "id": "cellar_torch",
      "x": 500,
      "y": 430
    },
    {
      "id": "catacomb_torch",
      "x": 1900,
      "y": 310
    }
  ],
  "enemies": [
    {
      "id": "skirmisher_cellar_1",
      "type": "skirmisher",
      "x": 300,
      "y": 430,
      "patrolPath": [
        { "x": 200, "y": 430 },
        { "x": 450, "y": 430 }
      ]
    },
    {
      "id": "skirmisher_cellar_2",
      "type": "skirmisher",
      "x": 650,
      "y": 430,
      "patrolPath": []
    },
    {
      "id": "shielded_tunnel",
      "type": "shielded",
      "x": 1000,
      "y": 380,
      "patrolPath": [
        { "x": 900, "y": 380 },
        { "x": 1200, "y": 380 }
      ]
    },
    {
      "id": "ranged_catacomb",
      "type": "ranged",
      "x": 2100,
      "y": 310,
      "patrolPath": []
    },
    {
      "id": "skirmisher_catacomb",
      "type": "skirmisher",
      "x": 2300,
      "y": 310,
      "patrolPath": [
        { "x": 2200, "y": 310 },
        { "x": 2400, "y": 310 }
      ]
    }
  ],
  "boss": {
    "id": "cellar_keeper",
    "name": "Cellar Keeper",
    "type": "elite",
    "x": 2500,
    "y": 330,
    "health": 18,
    "phases": [
      {
        "healthThreshold": 1.0,
        "patterns": ["burrow_strike", "tail_sweep"],
        "speed": 0.9
      },
      {
        "healthThreshold": 0.5,
        "patterns": ["burrow_strike", "tail_sweep", "summon_vermin"],
        "speed": 1.1
      }
    ],
    "arena": {
      "x": 2300,
      "y": 300,
      "width": 500,
      "height": 400
    }
  },
  "collectibles": [
    {
      "id": "shard_descent",
      "type": "shard",
      "x": 200,
      "y": 550,
      "value": 1
    },
    {
      "id": "shard_barrels",
      "type": "shard",
      "x": 475,
      "y": 530,
      "value": 1
    },
    {
      "id": "health_root",
      "type": "health",
      "x": 850,
      "y": 500,
      "value": 1
    },
    {
      "id": "shard_pool",
      "type": "shard",
      "x": 1560,
      "y": 400,
      "value": 1
    },
    {
      "id": "shard_catacomb",
      "type": "shard",
      "x": 2075,
      "y": 500,
      "value": 1
    },
    {
      "id": "secret_hidden_alcove",
      "type": "secret",
      "x": 1200,
      "y": 530,
      "value": 5
    }
  ],
  "triggers": [
    {
      "id": "chapter_5_opening",
      "x": 50,
      "y": 700,
      "width": 100,
      "height": 200,
      "type": "cutscene",
      "once": true,
      "data": {
        "cinematicId": "chapter_5_opening"
      }
    },
    {
      "id": "darkness_warning",
      "x": 200,
      "y": 400,
      "width": 100,
      "height": 200,
      "type": "dialogue",
      "once": true,
      "data": {
        "speaker": "Finn",
        "lines": [
          "The lantern light barely reaches here...",
          "Something moves in the darkness ahead."
        ]
      }
    },
    {
      "id": "boss_intro",
      "x": 2350,
      "y": 300,
      "width": 50,
      "height": 200,
      "type": "event",
      "once": true,
      "data": {
        "event": "boss_start",
        "bossId": "cellar_keeper"
      }
    },
    {
      "id": "chapter_complete",
      "x": 2600,
      "y": 100,
      "width": 100,
      "height": 200,
      "type": "event",
      "data": {
        "event": "chapter_complete",
        "nextChapter": 6
      }
    }
  ],
  "hazards": [
    {
      "id": "underground_pool",
      "x": 1350,
      "y": -50,
      "width": 350,
      "height": 350,
      "type": "water",
      "damage": 1,
      "respawnPoint": { "x": 1320, "y": 330 }
    },
    {
      "id": "spike_trap_1",
      "x": 900,
      "y": 350,
      "width": 80,
      "height": 30,
      "type": "spikes",
      "damage": 1,
      "interval": 2000
    }
  ],
  "decorations": [
    {
      "id": "wine_barrels",
      "type": "prop",
      "x": 350,
      "y": 400,
      "layer": "background",
      "sprite": "wine_barrels"
    },
    {
      "id": "hanging_roots",
      "type": "prop",
      "x": 750,
      "y": 350,
      "layer": "foreground",
      "sprite": "hanging_roots"
    },
    {
      "id": "skull_alcove",
      "type": "prop",
      "x": 1900,
      "y": 280,
      "layer": "background",
      "sprite": "ancient_remains"
    },
    {
      "id": "torch_sconce_1",
      "type": "light",
      "x": 400,
      "y": 450,
      "layer": "foreground",
      "sprite": "wall_torch"
    }
  ],
  "ambiance": {
    "music": "deep_cellars",
    "ambientSounds": ["dripping_water", "distant_rumble", "rats_scurrying", "wind_through_cracks"],
    "lighting": "torchlit_dark",
    "weather": "underground"
  }
}
