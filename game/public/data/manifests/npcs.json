{
  "$schema": "./manifest-schema.json",
  "version": "1.0.0",
  "category": "npcs",
  "description": "Woodland folk of Willowmere Hearthhold - allies, mentors, and those in need",

  "species": {
    "otter": {
      "description": "Brave, loyal, skilled swimmers and fighters. The Otterblade legacy runs through their veins.",
      "physique": "Sleek, muscular, webbed paws, thick rudder-tail",
      "personality": ["brave", "playful", "loyal", "fierce in battle"],
      "roles": ["warrior", "scout", "fisher", "guardian"],
      "colors": {
        "fur": ["#5D4E37", "#6B5344", "#8B7355"],
        "belly": ["#C4A77D", "#D4B896", "#E5C9A8"]
      }
    },
    "badger": {
      "description": "Noble warriors and steadfast leaders. Their strength is matched only by their sense of justice.",
      "physique": "Broad, powerful, distinctive black-and-white striped face",
      "personality": ["noble", "fierce", "protective", "sometimes prone to 'bloodwrath'"],
      "roles": ["leader", "warrior", "smith", "guardian"],
      "colors": {
        "fur": ["#2C2C2C", "#3D3D3D"],
        "stripes": ["#F5F5F5", "#E8E8E8"]
      }
    },
    "mouse": {
      "description": "The heart of the Hearthhold. Small in stature, mighty in spirit. Many heroes have come from mousefolk.",
      "physique": "Small, nimble, round ears, long tail",
      "personality": ["brave", "kind", "resourceful", "humble"],
<<<<<<< HEAD
      "roles": ["hearthholddweller", "healer", "scribe", "warrior"],
=======
      "roles": ["abbeydweller", "healer", "scribe", "warrior"],
>>>>>>> main
      "colors": {
        "fur": ["#8B7355", "#9C8465", "#A69076"]
      }
    },
    "mole": {
      "description": "Gentle tunnel-diggers with hearts of gold. Their speech is distinctive, their loyalty unshakeable.",
      "physique": "Stocky, velvet fur, powerful digging claws, small eyes",
      "personality": ["gentle", "loyal", "hardworking", "humble"],
      "roles": ["digger", "cook", "builder", "cellar keeper"],
      "colors": {
        "fur": ["#2F2F2F", "#3A3A3A", "#454545"]
      }
    },
    "hedgehog": {
      "description": "Prickly on the outside, warm within. Practical folk who keep the Hearthhold running.",
      "physique": "Round, covered in spines, small face, button nose",
      "personality": ["practical", "gruff", "loyal", "surprisingly fierce"],
      "roles": ["cellar keeper", "cook", "gardener", "scout"],
      "colors": {
        "spines": ["#5C4033", "#6B4D3A", "#7A5A42"],
        "face": ["#C4A77D", "#D4B896"]
      }
    },
    "hare": {
      "description": "The Long Patrol. Swift, brave, and absolutely incorrigible. Never met a battle they didn't charge into or a meal they didn't finish.",
      "physique": "Tall, lean, long ears, powerful legs",
      "personality": ["brave", "gluttonous", "loyal", "comedic", "noble"],
      "roles": ["warrior", "scout", "messenger", "patrol"],
      "colors": {
        "fur": ["#C4A77D", "#B5986E", "#A6895F"]
      }
    },
    "squirrel": {
      "description": "Agile tree-dwellers and fierce warriors. Masters of the high ground.",
      "physique": "Lithe, bushy tail, tufted ears, sharp claws",
      "personality": ["quick", "brave", "sometimes hot-headed", "loyal"],
      "roles": ["warrior", "scout", "archer", "messenger"],
      "colors": {
        "fur": ["#8B4513", "#A0522D", "#B5651D"],
        "tail": ["#CD853F", "#D2691E"]
      }
    },
    "shrew": {
      "description": "Small but fearless. The Guosim shrews are legendary river-travelers and fighters.",
      "physique": "Tiny, pointed snout, small ears",
      "personality": ["fierce", "proud", "loyal", "argumentative"],
      "roles": ["warrior", "boatfolk", "scout"],
      "colors": {
        "fur": ["#696969", "#808080", "#5A5A5A"]
      }
    },
    "vole": {
      "description": "Quiet, hardworking folk. The backbone of any community.",
      "physique": "Small, round, short tail",
      "personality": ["gentle", "hardworking", "shy", "kind"],
      "roles": ["farmer", "healer", "scribe", "cook"],
      "colors": {
        "fur": ["#8B7355", "#9C8465"]
      }
    },
    "dormouse": {
      "description": "Sleepy-eyed dreamers with surprising courage when roused.",
      "physique": "Tiny, fluffy, large eyes, bushy tail",
      "personality": ["dreamy", "gentle", "surprisingly brave", "loyal"],
      "roles": ["herbalist", "seer", "keeper of lore"],
      "colors": {
        "fur": ["#D2B48C", "#C4A77D", "#DEB887"]
      }
    },
    "rabbit": {
      "description": "Gentle folk, often farmers and craftspeople. Not to be confused with hares.",
      "physique": "Soft, fluffy, shorter ears than hares",
      "personality": ["gentle", "family-oriented", "hardworking"],
      "roles": ["farmer", "craftsperson", "healer"],
      "colors": {
        "fur": ["#D2B48C", "#C4A77D", "#F5F5DC"]
      }
    },
    "beaver": {
      "description": "Master builders. Their dams and constructions are legendary.",
      "physique": "Stocky, flat paddle-tail, large front teeth",
      "personality": ["industrious", "practical", "patient", "skilled"],
      "roles": ["builder", "engineer", "craftsperson"],
      "colors": {
        "fur": ["#5D4E37", "#6B5344", "#4A3C2A"]
      }
    }
  },

  "characters": [
    {
      "id": "finn_otterblade",
      "species": "otter",
      "name": "Finn",
      "title": "Bearer of the Otterblade",
      "role": "protagonist",
      "description": "A young otter who inherits the legendary Otterblade when darkness threatens Willowmere. Brave but untested, carrying a legacy they're still learning to bear.",
      "backstory": "Raised by their mother in a cottage by the river after their father fell defending the Hearthhold. The blade hung above the cold hearth for years, waiting.",
      "arc": "From uncertain inheritor to true champion",
      "procedural": {
        "type": "player_character",
        "drawFunction": "drawFinn",
        "hitbox": { "width": 28, "height": 48, "offsetY": -4 },
        "animations": ["idle", "walk", "run", "jump", "fall", "attack_1", "attack_2", "attack_3", "roll", "scamper", "hurt", "death"]
      }
    },
    {
      "id": "mother_riverstone",
      "species": "otter",
      "name": "Mother",
      "title": "Keeper of the Cottage",
      "role": "mentor",
      "chapters": [0],
      "description": "Finn's mother. Weathered by loss but unbowed. She knows what the blade means, what it costs.",
      "backstory": "Once a warrior herself, she set aside the blade when she had Finn. Now she watches her child take up the same burden that claimed her partner.",
      "personality": ["loving", "worried", "proud", "strong"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawOtterElder",
        "variant": "female",
        "hitbox": { "width": 30, "height": 52 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["nod", "blessing", "wave_farewell", "touch_heart"]
      }
    },
    {
      "id": "captain_grimclaw",
      "species": "badger",
      "name": "Grimclaw",
      "title": "Captain of the Gate",
      "role": "ally",
      "chapters": [2, 3, 8],
      "description": "A grizzled warrior who guards the Northern Gate. Skeptical of strangers, but recognizes the Otterblade's legacy.",
      "backstory": "Fought alongside Finn's father in the last great defense. The weight of those he couldn't save haunts him still.",
      "personality": ["stern", "honorable", "protective", "secretly caring"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawBadgerWarrior",
        "variant": "scarred",
        "hitbox": { "width": 40, "height": 64 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["stop_hand", "point", "salute", "bow", "arms_crossed", "nod_respect"]
      }
    },
    {
      "id": "sister_bramble",
      "species": "mouse",
      "name": "Sister Bramble",
      "title": "Keeper of the Archives",
      "role": "mentor",
      "chapters": [4],
      "description": "An elderly mouse who tends the great library. She knows secrets the stones have forgotten.",
      "backstory": "Has spent sixty seasons among the scrolls. The library is her life, and she will not see it fall to frost.",
      "personality": ["wise", "patient", "determined", "protective of knowledge"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawMouseElder",
        "variant": "robed",
        "hitbox": { "width": 24, "height": 40 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["beckon", "point_scroll", "nod_wise", "shake_head", "blessing"]
      }
    },
    {
      "id": "foremole_diggum",
      "species": "mole",
      "name": "Foremole Diggum",
      "title": "Master of the Deep Cellars",
      "role": "guide",
      "chapters": [5],
      "description": "Leader of the mole crew. Knows every tunnel, every secret way. His speech is hard to understand but his heart is pure.",
      "backstory": "His family has tended the cellars for generations. He knows passages even the Galeborn cannot find.",
      "personality": ["gentle", "loyal", "brave", "humble"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawMole",
        "variant": "foremole",
        "hitbox": { "width": 32, "height": 36 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["dig_motion", "point_tunnel", "thumbs_up", "wave_follow", "salute"]
      }
    },
    {
      "id": "colonel_clover",
      "species": "hare",
      "name": "Colonel Clover",
      "title": "Long Patrol Commander",
      "role": "ally",
      "chapters": [6, 8, 9],
      "description": "A veteran hare of the Long Patrol. Tall, proud, and absolutely unstoppable. Would die for the Hearthhold without a second thought.",
      "backstory": "Has led the Long Patrol for twenty seasons. Every scar is a story, every medal earned in blood.",
      "personality": ["brave", "noble", "theatrical", "secretly tender"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawHareWarrior",
        "variant": "officer",
        "hitbox": { "width": 32, "height": 60 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["salute_formal", "point_charge", "encouraging_fist", "bow", "rally_wave"]
      }
    },
    {
      "id": "nutkin_swift",
      "species": "squirrel",
      "name": "Nutkin Swift",
      "title": "Rooftop Scout",
      "role": "guide",
      "chapters": [7],
      "description": "Young, agile, fearless. Knows every rooftop, every gutter, every secret way across the high places.",
      "backstory": "An orphan raised by the Hearthhold. The rooftops are her domain, her freedom, her home.",
      "personality": ["quick", "playful", "brave", "fiercely independent"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawSquirrel",
        "variant": "scout",
        "hitbox": { "width": 26, "height": 44 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["beckon", "point_up", "thumbs_up", "jump_excited", "wave_follow"]
      }
    },
    {
      "id": "friar_rowan",
      "species": "hedgehog",
      "name": "Friar Rowan",
      "title": "Keeper of the Great Hearth",
      "role": "mentor",
      "chapters": [3, 9],
      "description": "The Hearthhold's cook and spiritual center. His meals warm bodies; his presence warms souls.",
      "backstory": "Has tended the Great Hearth for forty seasons. He remembers when the Everember last flickeredâ€”and what it cost to rekindle it.",
      "personality": ["warm", "practical", "wise", "surprisingly fierce"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawHedgehog",
        "variant": "friar",
        "hitbox": { "width": 34, "height": 42 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["welcome_arms", "point_hearth", "nod_wise", "blessing", "stir_pot"]
      }
    },
    {
      "id": "elder_willow",
      "species": "dormouse",
      "name": "Elder Willow",
      "title": "The Seer",
      "role": "oracle",
      "chapters": [4, 8],
      "description": "Ancient, dreamy, her eyes see beyond the present. She speaks in riddles but her visions are true.",
      "backstory": "Has lived longer than any can remember. Some say she was there when the Hearthhold was first built. She knows the prophecy of the Otterblade.",
      "personality": ["mystical", "gentle", "cryptic", "deeply kind"],
      "procedural": {
        "type": "npc",
        "drawFunction": "drawDormouse",
        "variant": "elder",
        "hitbox": { "width": 22, "height": 34 }
      },
      "dialogue": {
        "style": "gesture",
        "gestures": ["touch_forehead", "point_vision", "nod_knowing", "blessing_ancient"]
      }
    },
    {
      "id": "wounded_scout",
      "species": "hedgehog",
      "name": "Wounded Scout",
      "role": "quest_giver",
      "chapters": [1],
      "description": "A scout who barely escaped the Galeborn advance. Wounded but determined to help.",
      "procedural": {
        "type": "npc",
        "drawFunction": "drawHedgehog",
        "variant": "wounded",
        "hitbox": { "width": 34, "height": 42 }
      }
    },
    {
      "id": "refugee_mouse_family",
      "species": "mouse",
      "name": "Refugee Family",
      "role": "ambient",
      "chapters": [1, 2],
      "description": "A family fleeing the cold. Their presence reminds us what we fight for.",
      "procedural": {
        "type": "npc_group",
        "drawFunction": "drawMouseFamily",
        "count": 3,
        "hitbox": { "width": 60, "height": 40 }
      }
    },
    {
      "id": "mouse_child",
      "species": "mouse",
      "name": "Refugee Child",
      "role": "ambient",
      "chapters": [2],
      "description": "A young mouse, scared but hopeful. A small moment of connection in the cold.",
      "procedural": {
        "type": "npc",
        "drawFunction": "drawMouseChild",
        "hitbox": { "width": 18, "height": 28 }
      }
    }
  ],

  "npcBehaviors": {
    "idle": {
      "types": ["stand", "sit", "sleep", "work", "pray", "read"],
      "description": "Default behavior when not interacting"
    },
    "patrol": {
      "description": "Move between waypoints using Yuka pathfinding",
      "properties": ["patrolPath", "pauseDuration", "alertOnPlayer"]
    },
    "follow": {
      "description": "Follow player at distance using Yuka steering",
      "properties": ["followDistance", "maxDistance", "loseDistance"]
    },
    "flee": {
      "description": "Run away from threats using Yuka flee behavior",
      "properties": ["fleeTarget", "fleeSpeed", "hidePoints"]
    },
    "escort": {
      "description": "Lead player through area using Yuka pathfinding",
      "properties": ["escortPath", "waitForPlayer", "dialoguePoints"]
    },
    "scripted": {
      "description": "Follow a scripted sequence of movements and actions",
      "properties": ["sequence", "interruptible", "looping"]
    }
  },

  "gestureLibrary": {
    "greetings": ["wave", "nod", "bow", "salute", "salute_formal"],
    "directions": ["point", "point_up", "point_down", "beckon", "wave_follow", "stop_hand"],
    "emotions": ["nod_wise", "shake_head", "touch_heart", "arms_crossed", "encouraging_fist"],
    "blessings": ["blessing", "blessing_ancient", "touch_forehead"],
    "actions": ["dig_motion", "stir_pot", "draw_blade", "sheathe_blade"],
    "combat": ["rally_wave", "point_charge", "victory_raise"]
  }
}
